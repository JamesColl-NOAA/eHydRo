<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Refactor NHDPlus</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for refactor_nhdplus {hyRefactor}"><tr><td>refactor_nhdplus {hyRefactor}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Refactor NHDPlus</h2>

<h3>Description</h3>

<p>A complete network refactor workflow has been packaged
into this function. Builds a set of normalized catchment-flowpaths from
input flowline features. See details and vignettes for more information.
</p>


<h3>Usage</h3>

<pre>
refactor_nhdplus(
  nhdplus_flines,
  split_flines_meters,
  split_flines_cores,
  collapse_flines_meters,
  collapse_flines_main_meters,
  out_refactored,
  out_reconciled,
  three_pass = FALSE,
  purge_non_dendritic = TRUE,
  exclude_cats = NULL,
  events = NULL,
  warn = TRUE
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>nhdplus_flines</code></td>
<td>
<p>data.frame raw nhdplus flowline features as
derived from the national seamless geodatabase.</p>
</td></tr>
<tr valign="top"><td><code>split_flines_meters</code></td>
<td>
<p>numeric the maximum length flowpath desired
in the output.</p>
</td></tr>
<tr valign="top"><td><code>split_flines_cores</code></td>
<td>
<p>numeric the number of processing cores to use
while splitting flowlines.</p>
</td></tr>
<tr valign="top"><td><code>collapse_flines_meters</code></td>
<td>
<p>numeric the minimum length of
inter-confluence flowpath desired in the output.</p>
</td></tr>
<tr valign="top"><td><code>collapse_flines_main_meters</code></td>
<td>
<p>numeric the minimum length of
between-confluence flowpaths.</p>
</td></tr>
<tr valign="top"><td><code>out_refactored</code></td>
<td>
<p>character where to write a geopackage containing
the split and collapsed flowlines.</p>
</td></tr>
<tr valign="top"><td><code>out_reconciled</code></td>
<td>
<p>character where to write a geopackage containing
the reconciled flowpaths.</p>
</td></tr>
<tr valign="top"><td><code>three_pass</code></td>
<td>
<p>boolean whether to perform a three pass collapse or
single pass.</p>
</td></tr>
<tr valign="top"><td><code>purge_non_dendritic</code></td>
<td>
<p>boolean passed on to prepare_nhdplus</p>
</td></tr>
<tr valign="top"><td><code>exclude_cats</code></td>
<td>
<p>integer vector of COMIDs to be excluded from collapse modifications.</p>
</td></tr>
<tr valign="top"><td><code>events</code></td>
<td>
<p>data.frame containing events as generated by nhdplusTools::get_flowline_index()</p>
</td></tr>
<tr valign="top"><td><code>warn</code></td>
<td>
<p>boolean controls whether warning an status messages are printed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a convenient wrapper function that implements three phases
of the network refactor workflow: split, collapse, reconcile. See the
NHDPlus Refactor vignette for details of these three steps by running:
<code>vignette("refactor_nhdplus", package = "hyRefactor")</code>
</p>


<h3>See Also</h3>

<p>In addition to 'prepare_nhdplus' from the nhdplusTools package,
The following three functions are used in the 'refactor_nhdplus' workflow.
</p>

<ol>
<li> <p><code><a href="../../hyRefactor/help/split_flowlines.html">split_flowlines</a></code>
</p>
</li>
<li> <p><code><a href="../../hyRefactor/help/collapse_flowlines.html">collapse_flowlines</a></code>
</p>
</li>
<li> <p><code><a href="../../hyRefactor/help/reconcile_collapsed_flowlines.html">reconcile_collapsed_flowlines</a></code>
</p>
</li></ol>



<h3>Examples</h3>

<pre>
source(system.file("extdata",
                   "sample_flines.R",
                   package = "nhdplusTools"))

nhdplus_flowlines &lt;- sf::st_zm(sample_flines)
refactor_nhdplus(nhdplus_flines = nhdplus_flowlines,
                 split_flines_meters = 2000,
                 split_flines_cores = 3,
                 collapse_flines_meters = 500,
                 collapse_flines_main_meters = 500,
                 out_refactored = "temp.gpkg",
                 out_reconciled = "temp_rec.gpkg",
                 three_pass = TRUE,
                 purge_non_dendritic = FALSE,
                 warn = FALSE)
unlink("temp.gpkg")
unlink("temp_rec.gpkg")

</pre>

<hr /><div style="text-align: center;">[Package <em>hyRefactor</em> version 0.4.6 <a href="00Index.html">Index</a>]</div>
</body></html>
